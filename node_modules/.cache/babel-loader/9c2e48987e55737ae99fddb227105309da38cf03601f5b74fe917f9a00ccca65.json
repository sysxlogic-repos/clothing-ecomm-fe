{"ast":null,"code":"var _jsxFileName = \"D:\\\\test\\\\ecomm\\\\src\\\\contexts\\\\CartContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useReducer, useEffect } from 'react';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\n\n// Cart reducer\nconst cartReducer = (state, action) => {\n  switch (action.type) {\n    case 'LOAD_CART':\n      return {\n        ...state,\n        items: action.payload,\n        loading: false\n      };\n    case 'ADD_TO_CART':\n      const existingItem = state.items.find(item => item.id === action.payload.id && item.size === action.payload.size && item.color === action.payload.color);\n      if (existingItem) {\n        return {\n          ...state,\n          items: state.items.map(item => item.id === action.payload.id && item.size === action.payload.size && item.color === action.payload.color ? {\n            ...item,\n            quantity: item.quantity + action.payload.quantity\n          } : item)\n        };\n      } else {\n        return {\n          ...state,\n          items: [...state.items, action.payload]\n        };\n      }\n    case 'UPDATE_QUANTITY':\n      return {\n        ...state,\n        items: state.items.map(item => item.cartId === action.payload.cartId ? {\n          ...item,\n          quantity: action.payload.quantity\n        } : item).filter(item => item.quantity > 0)\n      };\n    case 'REMOVE_FROM_CART':\n      return {\n        ...state,\n        items: state.items.filter(item => item.cartId !== action.payload)\n      };\n    case 'CLEAR_CART':\n      return {\n        ...state,\n        items: []\n      };\n    case 'SET_LOADING':\n      return {\n        ...state,\n        loading: action.payload\n      };\n    default:\n      return state;\n  }\n};\nconst initialState = {\n  items: [],\n  loading: true\n};\nexport const CartProvider = ({\n  children\n}) => {\n  _s();\n  const [state, dispatch] = useReducer(cartReducer, initialState);\n\n  // Load cart from localStorage on mount\n  useEffect(() => {\n    const savedCart = localStorage.getItem('cart');\n    if (savedCart) {\n      try {\n        const cartItems = JSON.parse(savedCart);\n        dispatch({\n          type: 'LOAD_CART',\n          payload: cartItems\n        });\n      } catch (error) {\n        console.error('Error loading cart from localStorage:', error);\n        dispatch({\n          type: 'LOAD_CART',\n          payload: []\n        });\n      }\n    } else {\n      dispatch({\n        type: 'LOAD_CART',\n        payload: []\n      });\n    }\n  }, []);\n\n  // Save cart to localStorage whenever items change\n  useEffect(() => {\n    if (!state.loading) {\n      localStorage.setItem('cart', JSON.stringify(state.items));\n    }\n  }, [state.items, state.loading]);\n  const addToCart = (product, quantity = 1, size = null, color = null) => {\n    var _product$images;\n    const cartItem = {\n      cartId: `${product.id}-${size}-${color}-${Date.now()}`,\n      id: product.id,\n      name: product.name,\n      price: product.price,\n      image: ((_product$images = product.images) === null || _product$images === void 0 ? void 0 : _product$images[0]) || product.image,\n      size,\n      color,\n      quantity,\n      maxQuantity: product.stock || 10\n    };\n    dispatch({\n      type: 'ADD_TO_CART',\n      payload: cartItem\n    });\n    toast.success(`${product.name} added to cart!`);\n  };\n  const updateQuantity = (cartId, quantity) => {\n    if (quantity < 0) return;\n    dispatch({\n      type: 'UPDATE_QUANTITY',\n      payload: {\n        cartId,\n        quantity\n      }\n    });\n    if (quantity === 0) {\n      toast.success('Item removed from cart');\n    }\n  };\n  const removeFromCart = cartId => {\n    dispatch({\n      type: 'REMOVE_FROM_CART',\n      payload: cartId\n    });\n    toast.success('Item removed from cart');\n  };\n  const clearCart = () => {\n    dispatch({\n      type: 'CLEAR_CART'\n    });\n    toast.success('Cart cleared');\n  };\n  const getCartTotal = () => {\n    return state.items.reduce((total, item) => {\n      return total + item.price * item.quantity;\n    }, 0);\n  };\n  const getCartItemsCount = () => {\n    return state.items.reduce((total, item) => total + item.quantity, 0);\n  };\n  const isInCart = (productId, size = null, color = null) => {\n    return state.items.some(item => item.id === productId && item.size === size && item.color === color);\n  };\n  const getCartItem = (productId, size = null, color = null) => {\n    return state.items.find(item => item.id === productId && item.size === size && item.color === color);\n  };\n  const value = {\n    ...state,\n    addToCart,\n    updateQuantity,\n    removeFromCart,\n    clearCart,\n    getCartTotal,\n    getCartItemsCount,\n    isInCart,\n    getCartItem\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 183,\n    columnNumber: 5\n  }, this);\n};\n_s(CartProvider, \"GUSXxL/WUElrtHc/X73NyHNRMdw=\");\n_c = CartProvider;\nexport const useCart = () => {\n  _s2();\n  const context = useContext(CartContext);\n  if (!context) {\n    throw new Error('useCart must be used within a CartProvider');\n  }\n  return context;\n};\n_s2(useCart, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","toast","jsxDEV","_jsxDEV","CartContext","cartReducer","state","action","type","items","payload","loading","existingItem","find","item","id","size","color","map","quantity","cartId","filter","initialState","CartProvider","children","_s","dispatch","savedCart","localStorage","getItem","cartItems","JSON","parse","error","console","setItem","stringify","addToCart","product","_product$images","cartItem","Date","now","name","price","image","images","maxQuantity","stock","success","updateQuantity","removeFromCart","clearCart","getCartTotal","reduce","total","getCartItemsCount","isInCart","productId","some","getCartItem","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useCart","_s2","context","Error","$RefreshReg$"],"sources":["D:/test/ecomm/src/contexts/CartContext.js"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect } from 'react';\nimport toast from 'react-hot-toast';\n\nconst CartContext = createContext();\n\n// Cart reducer\nconst cartReducer = (state, action) => {\n  switch (action.type) {\n    case 'LOAD_CART':\n      return {\n        ...state,\n        items: action.payload,\n        loading: false\n      };\n    case 'ADD_TO_CART':\n      const existingItem = state.items.find(\n        item => item.id === action.payload.id && \n                item.size === action.payload.size && \n                item.color === action.payload.color\n      );\n      \n      if (existingItem) {\n        return {\n          ...state,\n          items: state.items.map(item =>\n            item.id === action.payload.id && \n            item.size === action.payload.size && \n            item.color === action.payload.color\n              ? { ...item, quantity: item.quantity + action.payload.quantity }\n              : item\n          )\n        };\n      } else {\n        return {\n          ...state,\n          items: [...state.items, action.payload]\n        };\n      }\n    \n    case 'UPDATE_QUANTITY':\n      return {\n        ...state,\n        items: state.items.map(item =>\n          item.cartId === action.payload.cartId\n            ? { ...item, quantity: action.payload.quantity }\n            : item\n        ).filter(item => item.quantity > 0)\n      };\n    \n    case 'REMOVE_FROM_CART':\n      return {\n        ...state,\n        items: state.items.filter(item => item.cartId !== action.payload)\n      };\n    \n    case 'CLEAR_CART':\n      return {\n        ...state,\n        items: []\n      };\n    \n    case 'SET_LOADING':\n      return {\n        ...state,\n        loading: action.payload\n      };\n    \n    default:\n      return state;\n  }\n};\n\nconst initialState = {\n  items: [],\n  loading: true\n};\n\nexport const CartProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(cartReducer, initialState);\n\n  // Load cart from localStorage on mount\n  useEffect(() => {\n    const savedCart = localStorage.getItem('cart');\n    if (savedCart) {\n      try {\n        const cartItems = JSON.parse(savedCart);\n        dispatch({ type: 'LOAD_CART', payload: cartItems });\n      } catch (error) {\n        console.error('Error loading cart from localStorage:', error);\n        dispatch({ type: 'LOAD_CART', payload: [] });\n      }\n    } else {\n      dispatch({ type: 'LOAD_CART', payload: [] });\n    }\n  }, []);\n\n  // Save cart to localStorage whenever items change\n  useEffect(() => {\n    if (!state.loading) {\n      localStorage.setItem('cart', JSON.stringify(state.items));\n    }\n  }, [state.items, state.loading]);\n\n  const addToCart = (product, quantity = 1, size = null, color = null) => {\n    const cartItem = {\n      cartId: `${product.id}-${size}-${color}-${Date.now()}`,\n      id: product.id,\n      name: product.name,\n      price: product.price,\n      image: product.images?.[0] || product.image,\n      size,\n      color,\n      quantity,\n      maxQuantity: product.stock || 10\n    };\n\n    dispatch({ type: 'ADD_TO_CART', payload: cartItem });\n    toast.success(`${product.name} added to cart!`);\n  };\n\n  const updateQuantity = (cartId, quantity) => {\n    if (quantity < 0) return;\n    \n    dispatch({\n      type: 'UPDATE_QUANTITY',\n      payload: { cartId, quantity }\n    });\n\n    if (quantity === 0) {\n      toast.success('Item removed from cart');\n    }\n  };\n\n  const removeFromCart = (cartId) => {\n    dispatch({ type: 'REMOVE_FROM_CART', payload: cartId });\n    toast.success('Item removed from cart');\n  };\n\n  const clearCart = () => {\n    dispatch({ type: 'CLEAR_CART' });\n    toast.success('Cart cleared');\n  };\n\n  const getCartTotal = () => {\n    return state.items.reduce((total, item) => {\n      return total + (item.price * item.quantity);\n    }, 0);\n  };\n\n  const getCartItemsCount = () => {\n    return state.items.reduce((total, item) => total + item.quantity, 0);\n  };\n\n  const isInCart = (productId, size = null, color = null) => {\n    return state.items.some(\n      item => item.id === productId && \n              item.size === size && \n              item.color === color\n    );\n  };\n\n  const getCartItem = (productId, size = null, color = null) => {\n    return state.items.find(\n      item => item.id === productId && \n              item.size === size && \n              item.color === color\n    );\n  };\n\n  const value = {\n    ...state,\n    addToCart,\n    updateQuantity,\n    removeFromCart,\n    clearCart,\n    getCartTotal,\n    getCartItemsCount,\n    isInCart,\n    getCartItem\n  };\n\n  return (\n    <CartContext.Provider value={value}>\n      {children}\n    </CartContext.Provider>\n  );\n};\n\nexport const useCart = () => {\n  const context = useContext(CartContext);\n  if (!context) {\n    throw new Error('useCart must be used within a CartProvider');\n  }\n  return context;\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}